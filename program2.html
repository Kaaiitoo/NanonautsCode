<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>
<script type="text/javascript">
	// CONSTANTS
	var CANVAS_WIDTH = 800;
	var CANVAS_HEIGHT = 600;
	var NANONAUT_WIDTH = 181;
	var NANONAUT_HEIGHT = 229;
	var GROUND_Y = 540;
	var NANONAUT_Y_ACCELERATION = 1;
	var SPACE_KEYCODE = 32;

	// SETUP
	var canvas = document.createElement('canvas');
	var c = canvas.getContext('2d');
	var nanonautYSpeed = 0;
	var spaceKeyIsPressed = false;
	canvas.width = CANVAS_WIDTH;
	canvas.height = CANVAS_HEIGHT;
	document.body.appendChild(canvas);

	var nanonautImage = new Image();
	nanonautImage.src = 'nanonaut.png';

	var backgroundImage = new Image();
	backgroundImage.src = 'background.png';

	var nanonautX = 50;
	var nanonautY = 40;

	window.addEventListener('load', start);
	window.addEventListener('keydown', onKeyDown);

	function start(){
		window.requestAnimationFrame(mainLoop);
	}

	// MAIN LOOP
	function mainLoop(){
		update();
		draw();
		window.requestAnimationFrame(mainLoop);
	}

	// PLAYER INPUT
	function onKeyDown(event){
		if (event.keyCode === SPACE_KEYCODE){
			spaceKeyIsPressed = true;
		}
	}

	// UPDATING
	function update(){
		nanonautY = nanonautY + nanonautYSpeed;
		nanonautYSpeed = nanonautYSpeed + NANONAUT_Y_ACCELERATION;

		if (nanonautY > (GROUND_Y - NANONAUT_HEIGHT)){
			nanonautY = GROUND_Y - NANONAUT_HEIGHT;
			nanonautYSpeed = 0;
		}
	}

	//DRAWING
	function draw(){
		c.clearRect(0, 0, CANVAS_WIDTH, CANVAS_HEIGHT);
		
		// Draw the sky.
		c.fillStyle = 'LightSkyBlue';
		c.fillRect(0, 0, CANVAS_WIDTH, GROUND_Y -40);

		//Draw the background.
		c.drawImage(backgroundImage, 0, -210);

		// Draw the ground.
		c.fillStyle = 'ForestGreen';
		c.fillRect(0, GROUND_Y -40, CANVAS_WIDTH, CANVAS_HEIGHT - GROUND_Y +40);

		// Draw the nanonaut.
		c.drawImage(nanonautImage, nanonautX, nanonautY);
	}


</script>
</body>
</html>
